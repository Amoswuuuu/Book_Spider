#from selenium import webdriver
import time
from selenium.webdriver.support.select import Select
import requests

from app import app

class main(object):
    def get_cookie(self,username, pwd):
       Code_url='http://59.72.194.13/VerifyCode.aspx'
       post_url='http://59.72.194.13/login.aspx'
       headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.75 Safari/537.36'}

       session=requests.session()

       session.get(Code_url,headers=headers)
       image_code=session.cookies.get_dict()['CheckCode']

       form_data = {
          '__LASTFOCUS':"",
          '__EVENTTARGET':"",
          '__EVENTARGUMENT':"",
          '__VIEWSTATE':'/wEPDwULLTEyOTMxOTM5ODQPZBYCAgMPZBYSAgMPDxYCHgRUZXh0BRcyMDE3LjEyLjIgU2F0dXJkYXkgMTU6MGRkAgcPFgIfAAUS5Lic5YyX55S15Yqb5aSn5a2mZAIJDxQrAAUPFgYeBVZhbHVlBSRiZGZlYjg2ZS0zYzI5LTQ2OTYtYTE5ZC02YzQyODg1MGNlYTMeD0RhdGFTb3VyY2VCb3VuZGceDl8hVXNlVmlld1N0YXRlZ2RkZDwrAAgBBxQrAAMWBh4KVmFsdWVGaWVsZAUIUFdSb2xlSUQeCVRleHRGaWVsZAUIUm9sZU5hbWUeEkVuYWJsZUNhbGxiYWNrTW9kZWhkDxYCHgpJc1NhdmVkQWxsZw8UKwAHFCsAARYIHwAFBuaVmeW4iB8BBSQ3NjM1OTJlNi0wZTZjLTRlZTAtOTIxOS01ZDBiYTdiOWM2YjIeCEltYWdlVXJsZR4OUnVudGltZUNyZWF0ZWRnFCsAARYIHwAFBuWtpueUnx8BBSRiZGZlYjg2ZS0zYzI5LTQ2OTYtYTE5ZC02YzQyODg1MGNlYTMfCGUfCWcUKwABFggfAAUM5pWZ5a2m56eY5LmmHwEFJGU2YzliZDExLTA4NTMtNDhhYi1iNzQ4LWM4MTQwMDRiNTkyYR8IZR8JZxQrAAEWCB8ABQzmlZnlrablubLkuosfAQUkMTcyNzE1NGUtNDVmMS00NDg2LTk5MTQtZWEwNDg0Nzg3ZjQwHwhlHwlnFCsAARYIHwAFCeeuoeeQhuiAhR8BBSQ3MDFmNzNiYi01NmM1LTRkMjItYThjMC0zNTY4OTY0ZDY0MWMfCGUfCWcUKwABFggfAAUJ6L6F5a+85ZGYHwEFJGFjYzFmYTI0LTA0YzktNDQ0Yi05Zjc1LTAwZDY0NDJlYTdhYx8IZR8JZxQrAAEWCB8ABQnlrp7pqozlrqQfAQUkZmY5NjFlNTMtNTgxMy00MDAxLWEyYzktNTU0ZDFiNzRlMDg4HwhlHwlnZGQWAmYPZBYCAgEPPCsACAEADxYEHwJnHwNnZGQCFQ8UKwAEDxYEHwEFHGh0dHA6Ly93d3cubGluZ3poYW5zb2Z0LmNvbS8fA2dkZGQ8KwAEAQAWAh8ABSTplb/mmKXlh4zlsZXova/ku7bmnInpmZDotKPku7vlhazlj7hkAhcPFgIfAAUi5ZCJ5p6X55yB6ZW/5pil5biC5Y2r5pif6LevNzA4OeWPt2QCGQ8WAh8ABQYxMzAwMjJkAhsPFgIfAAUW55S16K+d77yaMDQzMS04NTM2MTg4NmQCHQ8WAh8AZWQCHw8PZBYCHgVzdHlsZQUOZGlzcGxheTpibG9jazsWAgIBDzwrABYDAA8WCB8CZx4RQ2xpZW50U3RhdGVMb2FkZWRnHwNnHg1DYWxsYmFja1N0YXRlZGQGD2QQFgFmFgE8KwALAQAWCB4PQ29sVmlzaWJsZUluZGV4Zh4JU29ydEluZGV4Av////8PHgpHcm91cEluZGV4Av////8PHglTb3J0T3JkZXILKXhEZXZFeHByZXNzLkRhdGEuQ29sdW1uU29ydE9yZGVyLCBEZXZFeHByZXNzLkRhdGEudjguMywgVmVyc2lvbj04LjMuNC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTUzNzdjOGUzYjcyYjQwNzMADxYBAgEWAQWXAURldkV4cHJlc3MuV2ViLkFTUHhHcmlkVmlldy5HcmlkVmlld0RhdGFUZXh0Q29sdW1uLCBEZXZFeHByZXNzLldlYi5BU1B4R3JpZFZpZXcudjguMywgVmVyc2lvbj04LjMuNC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTUzNzdjOGUzYjcyYjQwNzMJFCsAARYCHhFTaG93Q29sdW1uSGVhZGVyc2gWAgIBD2QWAmYPZBYCZg9kFgJmD2QWAmYPZBYCBQpEWERhdGFSb3cwD2QWAgUJdGNjZWxsMF8wD2QWAgUHY2VsbDBfMA9kFgICAQ8PFgQfAAU/5YWz5LqO5pWZ5Yqh57O757uf5L2/55So5YmN55qE5rWP6KeI5Zmo6K6+572u6K+05piOKDEyIDI1IDIwMTMpHgtOYXZpZ2F0ZVVybAVJU3lzdGVtVG9vbC9TVE5ld3NEZXRhaWxzU2hvdy5hc3B4P0lkPWUxNDU2MmUxLTQ0OTctNGM1Yi04YmMyLTA2MGE1N2MzODNkMWRkGAEFHl9fQ29udHJvbHNSZXF1aXJlUG9zdEJhY2tLZXlfXxYCBQtjb2JSb2xlJERERAUHZ3JpZE5ld8dAaOJffWYFEpWRjmPC6UhfklSWpCR1Hv20QU7zRVmB',
          '__EVENTVALIDATION':'/wEdAAhf0G1KY9NqDvLphN5keJbVjKhqqK2HuP6glGwDGOqnGCuzIuTHn2KkMPhUR5SJal25XHmnj3dzI9eyxhYOgWGhAT0vEOKp9AImtJrQiEA3CljA7di3CyJVnLHSsTO5IdXN+DvxnwFeFeJ9MIBWR693uZw9dbcEc027fV4Pg1npsv9zKnX68VUU4fCfhO2vwOd962KdpAiDrpjWfOmjB7Wm',
          'cobRole_VI': 'bdfeb86e-3c29-4696-a19d-6c428850cea3',
          'cobRole':'学生',
          'cobRole_DDDWS':'0:0:-1:0:0:0:0:0:',
          'cobRole_DDD_LDeletedItems':'',
          'cobRole_DDD_LInsertedItems':'',
          'cobRole_DDD_LCustomCallback':'',
          'cobRole$DDD$L':'bdfeb86e-3c29-4696-a19d-6c428850cea3',
          'cobRole$DDD$L$CVS':'',
          'cobRole$CVS':'',
          'User_ID': username,
          'User_Pass': pwd,
          'txtVolidate': image_code,
          'Button1':'',
          'gridNew$DXSelInput':'',
          'gridNew$CallbackState':'/wEWBB4ERGF0YQWQA0FBQUFBQUVBQUFBQUFBQUFBUUFBQUFBREFBQUFDRk5VVG1WM2MwbEVDRk5VVG1WM2MwbEVDd0FBQlVselRtVjNCVWx6VG1WM0NnQUFET21BbXVlZnBlUy9vZWFCcnd6cGdKcm5uNlhrdjZIbWdhOEhBQUFMQUFBQUNVNWxkM05VYVhSc1pRdE9aWGR6UTI5dWRHVnVkQWxKYzNOMVpVUmhkR1VKU1hOemRXVkVaWEIwQ0ZCWFZYTmxja2xFQmxKbGJXRnlhdzFKYzBSbFptRjFiSFJFYVhOd0NVNWxkM05UWTI5d1pRaE9aWGR6UzJsdVpBZFNaV0ZrVG5WdENrMXZaR2xtZVVSaGRHVUhBQWNBQndBSEFBYi8vd3NDNFdKRjRaZEVXMHlMd2dZS1Y4T0QwUW9DQVFjQ1ArV0ZzK1M2anVhVm1lV0tvZWV6dStlN24rUzl2K2VVcU9XSmplZWFoT2ExaitpbmlPV1pxT2l1dnVlOXJ1aXZ0T2FZamlneE1pQXlOU0F5TURFektRPT0eBVN0YXRlBURCd0VIQUFJQkJ3QUhBQWNBQndBQ0FBYi8vd2tDQ0ZOVVRtVjNjMGxFQ1FJQUFnQURCd1FDQUFjQUFnRUhBQUlCQndBPQ=='
          }
       session.post (post_url, headers=headers, data=form_data)
       cookies = requests.utils.dict_from_cookiejar (session.cookies)
       return cookies
